# 刚体 Rigidbody

刚体使物体能在物理控制下运动。刚体可通过接受力与扭矩，使物体像现实方式一样运动。任何物体想要受重力影响，受脚本施加的力的作用，或通过 NVIDIA PhysX 物理引擎来与其他物体交互，都必须包含一个刚体组件。

![](http://www.ceeger.com/Components/Images/class-Rigidbody-0.jpg)

## 1. 相关属性

- Mass 质量 : 物体的质量(任意单位)。建议一个物体的质量不要多于或少于其他刚体的 100 倍。
- Drag 阻力 : 当受力移动时物体受到的空气阻力。0 表示没有空气阻力, 极大时使物体立即停止运动。
- Angular Drag 角阻力 : 当受扭力旋转时物体受到的空气阻力。0 表示没有空气阻力，极大时使物体立即停止旋转。
- Use Gravity 使用重力 : 若激活，则物体受重力影响。
- Is Kinematic 是否是运动学 : 若激活，该物体不再受物理引擎驱动，而只能通过变换来操作。适用于模拟运动的平台或者模拟受铰链关节连接的刚体。
- Interpolate 插值 : 当你发现刚体运动时抖动，可以尝试下面的选项。
  - None 无 : 不应用插值
  - Interpolate 内插值 : 基于上一帧的变换来平滑本帧变换
  - Extrapolate 外插值 : 基于下一帧的预估变换来平滑本帧变换
- Freeze Rotation 冻结旋转 : 若激活，物体将不会受碰撞或脚本施加的力而旋转 —— 只能调用 transform.Rotate() 来旋转。
- Collision Detection 碰撞检测 : 碰撞检测模式。用于避免高速物体穿过其他物体，却未触发碰撞。
  - Discrete 不连续 : 不连续碰撞检测。使用不连续碰撞检测模式来与场景中其他碰撞器进行碰撞检测。其他物体与它的碰撞检测，也会应用这种模式。适用于普通碰撞（这是默认的模式）。
  - Continuous 连续 : 连续碰撞检测。使用不连续碰撞检测来检测与动态碰撞器（刚体）的碰撞，使用连续碰撞检测来检测与静态网格（非刚体）的碰撞检测。采用连续动态碰撞检测模式的刚体碰见这类物体也将采用连续碰撞检测模式。而与其他刚体将采用不连续碰撞检测模式。这种模式适用于那些采用动态连续碰撞模式的物体碰撞的物体。（这对物理表现有很大的影响，如果你不关心与高速物体的碰撞，那么就让其为默认的不连续模式。）
  - Continuous Dynamic 动态连续 : 连续动态碰撞检测。使用连续动态碰撞检测模式来检测与连续模式和连续动态模式的物体间的碰撞。也适用于与静态网格（非刚体）的碰撞检测。而与之碰撞的其他模式的物体，采用的是不连续动态碰撞检测模式。适用于高速物体。
- Constraints 约束 : 对刚体运动的约束。
  - Freeze Position 冻结位置 : 刚体在世界中沿所选 X，Y，Z 轴的移动，将无效。
  - Freeze Rotation 冻结旋转 : 刚体在世界中沿所选的 X,Y,Z 轴的旋转，将无效。

## 2. 相关细节

刚体让物体在物理引擎控制下运动。它可以通过真实碰撞来开门，实现各种类型的关节及其他很酷的行为。通过力来操纵物体，与直接通过变换不同，有一种不同的感觉。通常情况下，对同一物体，要么通过刚体操纵，要么通过变换操纵。通过变换与通过刚体操纵最大的不同在于使用了力。刚体相比于变换，能够接受力与扭力。变换能够控制平移和旋转，但与物理方式的实现不同。你可以通过实践来明显地区分它们的不同。给刚体施加力和力矩实际也会改变物体变换组件的位置与旋转角度。这就是为什么在变换和刚体间，最好只选择一种操纵方式的原因。同时使用两种方式会导致旋转及其他计算出现问题。

刚体在受物理引擎影响之前，必须明确添加给物体。你可以通过选中物体，然后在菜单 Components->Physics->Rigidbody 来增加一个刚体组件。现在，你的物体的物理属性就设置好了，但你也可以根据需要来为其增加碰撞器或关节。

Parenting 父子级 : 当一个物体处于物理控制中，他会以半独立的方式随着变换的父亲的移动而移动。如果你移动父物体，那么它会将子刚体拖向它。但是，这个刚体仍然会根据重力下落或进行碰撞反应。

Scripting 脚本 : 可以通过脚本增加力或力矩来控制你的刚体。通过调用刚体中的 AddForce() 和 AddTorque 方法。 记住，不要同时使用物理与变换。

Animation 动画 : 有些情况下，比如想实现布娃娃效果。需要刚体在动画与物理的操纵方式间切换。这种情况下，刚体可以标记为运动学模式。当刚体标记为运动学模式，他不会受到碰撞，力及任何物理影响，它表示你必须直接通过变换的方式来操纵该物体。运动学模式的刚体会与其他物体进行物理交互，但自身不受物理影响。例如，通过关节约束那些和运动学刚体连接起来的刚体，运动学刚体影响那些与之发生碰撞的刚体。

Colliders 碰撞器 : 碰撞器是另一种组件，它和刚体一起，来使碰撞发生。如果两个刚体撞在一起，物理引擎将不会计算碰撞除非它们包含一个碰撞器组件。没有碰撞器的刚体，会在物理模拟中相互穿透。下图是碰撞器定义刚体的物理边界。

![](http://www.ceeger.com/Components/Images/class-Rigidbody-1.jpg)

通过菜单 Component->Physics menu 来添加一个碰撞器。

- Box Collider - primitive shape of a cube
  盒碰撞器 —— 基本形状是个盒子。
- Sphere Collider - primitive shape of a sphere
  球碰撞器 —— 基本形状是个球。
- Capsule Collider - primitive shape of a capsule
  胶囊碰撞器 —— 基本形状是个胶囊。
- Mesh Collider - creates a collider from the object's mesh, cannot collide with another Mesh Collider
  网格碰撞器 —— 从物体的网格创建一个碰撞器。不能与其他网格碰撞器相碰撞。
- Wheel Collider - specifically for creating cars or other moving vehicles
  轮碰撞器 —— 特殊的碰撞器，用于创建车或其他移动交通工具。

Compound Colliders 复合碰撞器 : 组合碰撞器是基本碰撞器的组合，共同扮演一个碰撞器的角色。当你有一个复杂网格却不适用网格碰撞器的情况下，使用组合碰撞器是个好的选择。要创建组合碰撞器，先为你的碰撞物体创建子对象，然后对每个子对象创建一个基本碰撞器。这样就允许你轻易的独立移动、旋转和放缩每个碰撞器。下图一个真实的组合碰撞器的配置

![](http://www.ceeger.com/Components/Images/class-Rigidbody-2.jpg)

上图中，环境里包含一个网格碰撞器。网格碰撞器的最佳适用地方是不规则形状的地形或环境。如图，枪模型物体包含一个刚体组件，以及数个基本碰撞器的子物体。当刚体这个父对象受力移动时，它的子碰撞器也跟着移动。基本碰撞器与环境的网格碰撞器发生碰撞时，父对象的刚体也会因其子碰撞器与环境中其他碰撞器发生碰撞产生的力而改变运动轨迹 。

网格碰撞器之间通常不相互碰撞，但如果一个网格碰撞器被标记为凸体，那么它就可以与其他网格碰撞器碰撞。典型的解决方案是，对移动的对象使用基本碰撞器，而对静态环境对象使用网格碰撞器。

Continuous Collision Detection 连续碰撞检测 : 连续碰撞检测的主要作用是避免高速物体的穿透。在不连续碰撞检测模式下，一个高速物体的上一帧位置在一个碰撞器的一边，而下一帧位置就穿透该碰撞器时，就发生了穿透。为了解决这个问题，你要为高速物体设置连续碰撞检测模式。设置连续碰撞检测模式将避免刚体穿透静态网格碰撞器（该网格未必是刚体）。而设置为连续动态碰撞检测将避免刚体穿透设为连续动态碰撞检测与动态碰撞检测的刚体。盒碰撞器、球碰撞器及胶囊碰撞器支持动态碰撞检测。主要，连续碰撞检测只是提供了一种穿透的保护，它保证捕获碰撞事件，但并不保证碰撞反应的精确性。所以，当你发现高速物体有这方面问题时，得考虑降低 TimeManager 中的固定时间间隔来让模拟更加的精确。

## 3. 使用正确的大小

你的物体网格的大小要比刚体的质量更加重要。如果你发现你的刚体不像你所期望的那样运动 —— 慢、飘、碰撞不正确 —— 那么请考虑调整你的网格资源的大小。Unity 的默认长度单位是1单位=1米。你导入模型的大小会被保持，并参与物理运算中。例如，一个摩天大楼倒塌的表现肯定要异于一个玩具积木搭起来的塔，所以，对不同大小物体，要用精确的比例建模。

如果对一个人体建模，那么保证它大概在 Unity 中2米高。可以和一个默认的盒子对比来判断大小。使用 GameObject->Create Other->Cube 来创建盒子。盒子的高为1米，所以你的人高度应该是它的两倍。

如果你不能自己调整网格，那你可以修改一个指定网格资源的比例，通过在项目视图中选中它，然后在目录里选择 Assets->Import Settings，在这里，你可以选择比例，然后重新加载你的网格。

如果物体在游戏中需要实例化成不同的比例，可以调整变换组件的比例轴。这种做法的缺点是在物体实例化时，物理模拟将执行更多操作，会导致游戏性能下降。 这不是很可怕的下降，但确实没有采用其他两种方法那样有效率。此外，父对象使用一个非标准比例的物体也会产生不好的行为。所以，建议是创建物体时尽量调整好标准比例。

## 4. Hints 提示

- 两个物体的相对质量定义它们之间的碰撞反应表现。
- 一个质量大的物体并不会在自由落体中下落更快。想实现这种现象请使用阻力。
- 阻力越大，物体看起来越轻，阻力越小，物体看起来越重。阻力的典型值在 0.001（砖头）到 10（羽毛）之间。
- 如你直接操纵一个物体的变换同时又想拥有物理特性，那么为其增加一个刚体组件，并将其设为运动学模式。
- 若你通过变换来移动一个物体，并想接受碰撞或触发消息 ，你必须为其在移动时附加一个刚体组件。

End.
